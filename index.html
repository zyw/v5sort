
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>jQuery 图形化排序教程-附源文件下载 - from js do it</title>
<meta name="Description" content="jQuery,javascript图形化排序教程,冒泡排序,选择排序,插入排序,希尔排序,摇摆排序,快速排序,归并排序,堆排序" />
<meta name="Keywords"  content="jQuery,图形化排序教程,冒泡排序,选择排序,插入排序,希尔排序,摇摆排序,快速排序,归并排序,堆排序" />

<link rel="stylesheet" type="text/css" media="screen,print" href="css/reset.css" />

<link rel="stylesheet" type="text/css" media="screen,print" href="css/style.css" />
</head>
<body>
<!-- generated by: jsdo.it - http://jsdo.it/norahiko/oxIy -->
<!-- Copyright norahiko - http://jsdo.it/norahiko -->
<!-- Licensed under MIT License - http://www.opensource.org/licenses/mit-license.php -->
<script src="js/jquery.min.js"></script>
<script src="js/jquery-ui.min.js"></script>
<link href="css/jquery-ui.css" rel="stylesheet">
  <!-- eggplant sunny -->
  <div id="wrapper">
    <div id="view"></div>
  </div>

<script type="text/javascript" id="jscript">

$(function(){
  // -----------------------------------------
  // Bubble sort
  // -----------------------------------------
  function bubbleSort(){
    var array = this.values;
    var length = array.length;
    for(var i = length - 1; 0 < i; i--){
      for(var j = 0; j < i; j++){
        this.compare(j, j + 1);
      }
    }
  }
  
  // -----------------------------------------
  // Selection sort
  // -----------------------------------------
  function selectionSort(){
    var array = this.values
    var length = array.length
    for(var i = 0; i < length - 1; i++){
      var minIndex = i
      var minValue = array[minIndex]
      for (var j = i + 1; j < length; j++) {
        this.highlight(j, minIndex)
        if (array[j] < minValue) {
          minIndex = j
          minValue = array[minIndex]
        }
      }
      this.compare(i, minIndex)
    }
    return array
  }
  // -----------------------------------------
  // Shaker Sort
  // -----------------------------------------
  function shakerSort(){
    var array = this.values
    var length = array.length
    var left = 0
    var right = length - 1
    var lastSwappedLeft = left
    var lastSwappedRight = right
    
    while(left < right){
      lastSwappedRight = 0
      for(var i = left; i < right; i++){
        if(array[i] > array[i + 1]){
          this.swap(i, i + 1)
          lastSwappedRight = i
        }else{
          this.highlight(i, i + 1)
        }
      }
      right = lastSwappedRight
      
      lastSwappedLeft = length - 1
      for(var j = right; left < j; j--){
        if(array[j - 1] > array[j]){
          this.swap(j - 1, j)
          lastSwappedLeft = j
        }else{
          this.highlight(j - 1, j)
        }
      }
      left = lastSwappedLeft
    }
  }    
  // -----------------------------------------
  // Insertion sort
  // -----------------------------------------
  function insertionSort(){
    var array = this.values
    var length = array.length
    for(var i = 1; i < length; i++){
      for(var j = i; 0 < j; j--){
        if(array[j - 1] > array[j]){
          this.swap(j - 1, j)
        }else{
          this.highlight(j - 1, j)
          break
        }
      }
    }
  }
  
  // -----------------------------------------
  // Shell Sort
  // -----------------------------------------
  function shellSort(){
    var array = this.values
    var length = array.length
    var gap = 1
    while(gap < length) {
      gap = 3 * gap + 1
    }
    while(gap > 1){
      gap = Math.floor(gap / 3)
      for(var i = gap; i < length; i++){
        for(var j = i; 0 < j; j -= gap){
          if(array[j - gap] > array[j]){
            this.swap(j - gap, j)
          }else{
            this.highlight(j - gap, j)
            break
          }
        }
      }
    }
  }

  // -----------------------------------------
  // Quick sort
  // -----------------------------------------
  function quickSort(first, last){
    var array = this.values
    first = (first === undefined) ? 0 : first
    last = (last === undefined) ? (array.length - 1) : last
    var pivotIndex = Math.floor((first + last) / 2)
    var pivotValue = array[pivotIndex]
    var f = first, l = last
    while(true){
      while(true){
        this.highlight(f, pivotIndex)
        if(!(array[f] < pivotValue)) break
        f++
      }
      while(true){
        this.highlight(l, pivotIndex)
        if(!(pivotValue < array[l])) break
        l--
      }  
      if(l <= f){
        break
      }
      if(pivotIndex === l){
        pivotIndex = f
      }
      if(pivotIndex === l){
        pivotIndex = l
      }
      this.compare(f, l)
      f++; l--
    }
    if(first < f - 1) quickSort.call(this, first, f - 1)
    if(l + 1 < last) quickSort.call(this, l + 1, last)
  }
  
  // -----------------------------------------
  // Merge sort
  // -----------------------------------------
  function mergeSort(first, last){
    var array = this.values
    first = (first === undefined) ? 0 : first
    last = (last === undefined) ? array.length - 1 : last
    if (last - first < 1) {
      return
    }
    var middle = Math.floor((first + last) / 2)
    mergeSort.call(this, first, middle)
    mergeSort.call(this, middle + 1, last)
    
    var f = first
    var m = middle
    
    while (f <= m && m + 1 <= last) {
      this.highlight(f, m + 1)
      if (array[f] >= array[m + 1]) {
        this.insertBefore(m + 1, f)
        m++
      }
      f++
    }
  }
  
  // -----------------------------------------
  // Heap sort
  // -----------------------------------------
  function swapUp(array, current){
    var parent = Math.floor((current - 1) / 2)
    while(current != 0){
      if (!(array[current] > array[parent])) {
        this.highlight(current, parent)
        break
      }
      this.swap(current, parent)
      current = parent
      parent = Math.floor((current - 1) / 2)
    }
  }
  
  function swapDown(array, current, length){
    var child = current * 2 + 1
    while(true){
      if(array[child] < array[child + 1]){
        child += 1
      }
      if(array[current] >= array[child]){
        this.highlight(current, child)
        break
      }
      if(length <= child){
        break
      }
      this.swap(current, child)
      current = child
      child = current * 2 + 1
    }
  }
  
  function heapify(array){
    for(var i = 0; i < array.length; i++){
      swapUp.call(this, array, i)
    }
  }
  
  function heapSort(){
    var array = this.values
    heapify.call(this, array)
    for(var i = array.length - 1; 0 < i; i--){
      if(array[0] > array[i]){
        this.swap(0, i)
      }else{
        this.highlight(0, i)
      }
      swapDown.call(this, array, 0, i)
    }
  }
  
  // -----------------------------------------
  // Bogo sort
  // -----------------------------------------
  function bogoSort(){
    var array = this.values
    this.bogoSortCompleted = false
    var length = array.length
    // shffle
    for(var i = 0; i < length; i++){
      var j = Math.floor(Math.random() * length)
      this.swap(i, j)
    }
    
    // check
    for(var i = 0; i < length - 1; i++){
      this.highlight(i, i + 1)
      if(array[i] > array[i + 1]){
        return　// incomplete
      }
    }
    this.bogoSortCompleted = true
  }
  bogoSort.name = "bogoSort"

  // -----------------------------------------
  // Main
  // -----------------------------------------
  var sort = GraphicalSort()
  
  // default sort function
  sort.sortFunc = bubbleSort
  
  var view = $("#view")
  view.width($(window).width()).height($(window).height() - 125)
  sort.show(view)
  
  // -----------------------------------------
  // Sort menu
  // -----------------------------------------
  var sortMenu = {
    "Bubble_冒泡": bubbleSort,
    "Selection_选择": selectionSort,
    "Shaker_摇摆": shakerSort,
    "Insertion_插入": insertionSort,
    "Shell_希尔": shellSort,
    "Quick_快速": quickSort,
    "Merge_归并": mergeSort,
    "Heap_堆": heapSort,
    "Bogo_暂未完成": bogoSort
  }
  
  var menu = $("<div>").insertBefore(view).css({
    marginBottom: 10,
    fontSize: 12
  })
  // 源代码容器
  var scriptContainer = $("<div>").insertBefore(menu).attr("id","scriptContainer")
  // 源代码 pre 标签
  var scriptStr = "" + sort.sortFunc
  var scriptPre = $("<pre>").appendTo(scriptContainer).attr("id","scriptPre").html(scriptStr)
 
  // 是生成各个排序按钮
  $.each(sortMenu, function(name, func){
    var radio = $("<input type='radio' name='sort-menu' >").attr("id", name).appendTo(menu)
    var label = $("<label>").attr("for", name).text(name).appendTo(menu)
    
    radio.click(function(){
      sort.sortFunc = func
      sort.displayBars()
      scriptStr = "" + sort.sortFunc
      scriptPre.html(scriptStr)
    })
    
    if(sort.sortFunc === func){
      radio.attr("checked", "true")
    }
  })
   // 显示代码按钮
  var showScriptBtn = $("<button>").click(function(){
    if(showScriptBtn.children().text() == "显示代码"){
      $(scriptContainer).css({
        display: "block"
      })
      showScriptBtn.children().text("隐藏代码")
    } else {
      $(scriptContainer).css({
        display: "none"
      })
      showScriptBtn.children().text("显示代码")
    }
  }).appendTo(menu).text("隐藏代码")
  menu.buttonset()
})
</script>
<script type="text/javascript" src="js/classy.js"></script>
<script type="text/javascript" src="js/index.js"></script>
</body>
</html>